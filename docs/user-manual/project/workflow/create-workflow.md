---
title: 创建工单
---

# 创建工单
工单是SQLE提供的在线化SQL上线方式。研发人员可通过创建工单，提请需要审批的SQL语句。
:::tip
当前SQLE平台支持手动输入、或上传SQL文件、mybatis的xml文件的形式，实现SQL上传。
:::

### 使用场景
实际生产中会存在业务变更、业务上线，比如初始化构建业务库、跑批。此时，需要针对某个数据库执行一批SQL。用户可通过SQLe创建工单，输入SQL语句或者上传SQL脚本。

### 前置条件
项目管理员已添加数据源
项目管理员已配置审核流程模板

### 操作步骤
#### 步骤一：填写工单基本信息
创建工单前，需要为工单指定唯一的工单名称，并填写工单说明。

* 填写工单名称：工单名称支持中英文
    * 工单名称可自行创建
    * 若未填写，平台将根据步骤二中工单应用的数据源及添加时间组合填充工单名称
* 填写工单描述：输入工单描述信息，仅限50个字符

#### 步骤二：审核SQL语句
需要填写工单中涉及的SQL语句，执行【审核】操作，SQLe会根据数据源配置的审核规则模板，自动进行SQL语句的规则审核，并反馈审核结果。。
* 选择数据源：表示修改最终会应用到哪个数据源；
    * 社区版一个工单内仅支持选择一个数据源
    * 企业版一个工单内支持添加多个数据源
* 是否选择相同SQL：当添加多个数据源时，可设置是否选择相同SQL
    * 使用相同SQL模式，
        * 限制：数据源的数据库类型相同
        * 效果：对不同数据源下发相同SQL
    * 若不使用相同SQL模式
        * 效果：对不同数据源下发不同SQL
* 选择数据库：选择要执行的数据库，相当于执行 use 语句；
    * 若未选择数据库，工单上线后，将脱库执行下发的SQL【有什么影响】
* 选择审核SQL语句上传方式：平台提供三种上传方式，包括输入SQL语句、上传SQL文件、上传mybatis的xml文件；
    * 输入SQL语句：项目成员可在平台编辑器中直接输入SQL；
    * 上传SQL文件：项目成员可选择本地的SQL文件上传
    * 上传Mybatis的XML文件：项目成员可选择本地的XML文件上传
* 点击审核，显示平台审核结果


#### 步骤三：查看审核结果

将根据数据源不同，展示不同数据源下的SQL审核结果。
审核结果由以下几部分组成：

* 数据源标签：显示当前SQL操作的数据源，当有多个数据源时，可切换数据源标签，查看不同数据源上的审核情况
* 数据源上SQL的整体审核通过率、审核结果评分及操作的数据库
* 数据源上每条SQL的审核结果、SQL语句及执行状态，可分析SQL
* 功能区：
    * 下载审核报告：查看当前数据源下审核的sql语句及其审核结果
    * 下载SQL语句：下载文件，可查看当前数据源下审核的sql语句及其审核结果
    * 设置是否去重：若SQL语句结构一致，去重后将仅显示去重后的SQL


#### 步骤四：点击创建工单
完成创建后，即可看到工单列表中该工单显示为待审核

### 执行结果
创建工单后，可在工单列表查看已创建的所有工单
SQLe > 1 创建工单 > image2023-2-2 17:37:32.png
【图片缺失】

### 后续步骤
* 审核工单：工单创建完成后，将依据审核流程模板的设定，流转至指定的审核成员处，审核成员需登录后进行审核操作，详情可参见【审核工单】。
【超链缺失】


